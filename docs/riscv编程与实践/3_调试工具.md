### GDB的调试

下面的命令在gdb调试中经常使用：

- `run`：开始执行程序并运行到断点或程序结束。

- `break`：设置断点，可以设置在指定的函数、行号或地址上。

  ```
  b main						# 在main函数的开头设置断点
  b 35						# 在35行设置断点
  ```

- `continue`：继续执行程序，直到遇到下一个断点或程序结束。

- `next`：执行下一行代码，如果遇到函数调用，则不会进入函数内部。

- `step`：执行下一行代码，如果遇到函数调用，则会进入函数内部。

  ```
  s								
  si							# step instruction，汇编级别的单步调试
  ```

- `print`：打印变量的值。

  ```
  print/z $a5				# 查看寄存器要加$
  # 默认把寄存器的值当成有符号数，以十进制输出
  # /z表示直接显示内存中的东西
  print _start
  ```

- `display`：持续打印变量的值，每次停在断点时都会显示。

  ```
  display/z $a5				# 查看寄存器要加$，/z表示显示十六进制
  ```

- `info `：显示信息。

  ```
  info breakpoints
  info all-registers			# 按两下Tab出现好多
  ```

- `delete`：删除指定的断点。

  ```
  delete display 1
  ```

- `backtrace`：显示当前函数调用栈。

- `frame`：切换到指定的栈帧。

- `list`：显示当前执行位置周围的源代码。

- `finish`：执行完当前函数，并返回到调用该函数的位置。

- `until`：在执行完循环体内的最后一条语句的时候执行, 会执行完循环到下一条语句

- `set variable`：修改变量的值。

- `watch`：设置监视点，当指定变量的值发生变化时触发断点。

- `quit`：退出 GDB。

有时候远程调试qemu断开后gdb server依旧占用1234端口，需要手动kill掉

```shell
lsof -i :1234
```

### 观察ELF文件

只要是ELF格式的文件，就可以用`objdump -d benos.elf `查看它的反汇编内容

